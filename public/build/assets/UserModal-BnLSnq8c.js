import{u as M,h as D,l as $,W as v,t as N,c as a,o as d,b as r,F as S,x as F,f as E,g as l,i as p,q as f,E as i,A as O}from"./app-BwqKRIuq.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a3 as _,K as G,a6 as n,n as u}from"./reactivity.esm-bundler-BqKWhRsu.js";const P={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},T={class:"bg-white rounded-lg shadow-xl w-full max-w-3xl"},B={class:"p-6"},I={class:"text-xl font-semibold mb-4"},L={class:"border-b border-gray-200 mb-6"},W={class:"flex space-x-8"},q=["onClick"],z={key:0,class:"mb-4 text-red-500 text-sm"},K={class:"space-y-4"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"space-y-4"},J={key:0},Q={key:0,class:"text-red-500 text-sm mt-1"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={class:"space-y-4"},Z={class:"grid grid-cols-3 gap-4"},h={key:0,class:"text-red-500 text-sm mt-1"},ee={key:0,class:"text-red-500 text-sm mt-1"},re={key:0,class:"text-red-500 text-sm mt-1"},se={class:"grid grid-cols-2 gap-4"},oe={key:0,class:"text-red-500 text-sm mt-1"},te={key:0,class:"text-red-500 text-sm mt-1"},ae={class:"grid grid-cols-2 gap-4"},de={key:0,class:"text-red-500 text-sm mt-1"},le={class:"space-y-4"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ne={key:0,class:"text-red-500 text-sm mt-1"},ue={key:0,class:"text-red-500 text-sm mt-1"},ie={key:0,class:"text-red-500 text-sm mt-1"},me={key:0,class:"text-red-500 text-sm mt-1"},be={key:0,class:"text-red-500 text-sm mt-1"},ge={key:0,class:"text-red-500 text-sm mt-1"},xe={key:0,class:"text-red-500 text-sm mt-1"},ye={class:"space-y-4"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={key:0,class:"text-red-500 text-sm mt-1"},_e={key:0,class:"text-red-500 text-sm mt-1"},ce={key:0,class:"text-red-500 text-sm mt-1"},$e={key:0,class:"text-red-500 text-sm mt-1"},ke={class:"mt-6 flex justify-between"},we={class:"flex space-x-3"},Ue=["disabled"],Ve={__name:"UserModal",props:{user:{type:Object,default:()=>({})},mode:{type:String,required:!0}},emits:["close"],setup(g,{emit:k}){const w=M(),m=_(1),U=[{id:1,label:"Datos Generales"},{id:2,label:"Domicilio"},{id:3,label:"Otros Datos"}],b=g,V=k,C=D(()=>{const s={id:0,username:"",email:"",password:"",nombre:"",ap_paterno:"",ap_materno:"",curp:"",fecha_nacimiento:"",genero:"1",emails:"",celulares:"",telefonos:"",user_adress:{calle:"",num_ext:"",num_int:"",colonia:"",municipio:"",estado:"",pais:"México",cp:""},user_data_extend:{lugar_nacimiento:"",ocupacion:"",profesion:"",lugar_trabajo:""}};return b.mode==="edit"?{...s,...b.user,user_adress:{...s.user_adress,...b.user.user_adress||{}},user_data_extend:{...s.user_data_extend,...b.user.user_data_extend||{}}}:s}),t=G({...C.value}),x=_(!1),y=_({});$(()=>b.user,s=>{b.mode==="edit"&&(y.value={},v.reload({only:["errors"]}))}),$(()=>w.props.errors,s=>{y.value=s,N(()=>{m.value=Object.keys(s).some(e=>e.startsWith("domicilio"))?2:1})});const j=()=>{x.value=!0,y.value={};const s=b.mode==="create"?route("users.store"):route("users.update",b.user.id),e=b.mode==="create"?"post":"put";v[e](s,t,{preserveScroll:!0,onSuccess:()=>{c()},onError:o=>{x.value=!1,y.value=o},onFinish:()=>{x.value=!1}})},c=()=>{y.value={},v.reload({only:["errors"]}),V("close")};return(s,e)=>(d(),a("div",P,[r("div",T,[r("div",B,[r("h2",I,n(g.mode==="create"?"Nuevo Usuario":"Editar Usuario: "+g.user.id+" - "+g.user.username),1),r("div",L,[r("nav",W,[(d(),a(S,null,F(U,o=>r("button",{key:o.id,onClick:Ce=>m.value=o.id,class:u(["px-4 py-2 text-sm font-medium",{"text-blue-600 border-b-2 border-blue-600":m.value===o.id,"text-gray-500 hover:text-gray-700":m.value!==o.id}])},n(o.label),11,q)),64))])]),r("form",{onSubmit:E(j,["prevent"])},[s.$page.props.errors.error?(d(),a("div",z,n(s.$page.props.errors.error),1)):l("",!0),p(r("div",K,[r("div",R,[r("div",H,[g.mode==="create"?(d(),a("div",J,[e[23]||(e[23]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Usuario",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>t.username=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors.username}])},null,2),[[i,t.username]]),s.$page.props.errors.username?(d(),a("p",Q,n(s.$page.props.errors.username),1)):l("",!0)])):l("",!0),r("div",null,[e[24]||(e[24]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email principal",-1)),p(r("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=o=>t.email=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors.email}])},null,2),[[i,t.email]]),s.$page.props.errors.email?(d(),a("p",X,n(s.$page.props.errors.email),1)):l("",!0)])]),r("div",Y,[r("div",Z,[r("div",null,[e[25]||(e[25]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ap. Paterno",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>t.ap_paterno=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors.ap_paterno}])},null,2),[[i,t.ap_paterno]]),s.$page.props.errors.ap_paterno?(d(),a("p",h,n(s.$page.props.errors.ap_paterno),1)):l("",!0)]),r("div",null,[e[26]||(e[26]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ap. Materno",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>t.ap_materno=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors.ap_materno}])},null,2),[[i,t.ap_materno]]),s.$page.props.errors.ap_materno?(d(),a("p",ee,n(s.$page.props.errors.ap_materno),1)):l("",!0)]),r("div",null,[e[27]||(e[27]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre(s)",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>t.nombre=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors.nombre}])},null,2),[[i,t.nombre]]),s.$page.props.errors.nombre?(d(),a("p",re,n(s.$page.props.errors.nombre),1)):l("",!0)])]),r("div",se,[r("div",null,[e[28]||(e[28]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"CURP",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>t.curp=o),class:u(["w-full px-3 py-2 border rounded-md uppercase",{"border-red-500":s.$page.props.errors.curp}]),maxlength:"18",onInput:e[6]||(e[6]=o=>t.curp=o.target.value.toUpperCase())},null,34),[[i,t.curp]]),s.$page.props.errors.curp?(d(),a("p",oe,n(s.$page.props.errors.curp),1)):l("",!0)]),r("div",null,[e[29]||(e[29]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha Nacimiento",-1)),p(r("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=o=>t.fecha_nacimiento=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors.fecha_nacimiento}])},null,2),[[i,t.fecha_nacimiento]]),s.$page.props.errors.fecha_nacimiento?(d(),a("p",te,n(s.$page.props.errors.fecha_nacimiento),1)):l("",!0)])]),r("div",ae,[r("div",null,[e[31]||(e[31]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Género",-1)),p(r("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.genero=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors.genero}])},e[30]||(e[30]=[r("option",{value:"1"},"Masculino",-1),r("option",{value:"0"},"Femenino",-1),r("option",{value:"2"},"Otro",-1)]),2),[[O,t.genero]]),s.$page.props.errors.genero?(d(),a("p",de,n(s.$page.props.errors.genero),1)):l("",!0)])])])])],512),[[f,m.value===1]]),p(r("div",le,[r("div",pe,[r("div",null,[e[32]||(e[32]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Calle",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=o=>t.user_adress.calle=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_adress.calle"]}])},null,2),[[i,t.user_adress.calle]]),s.$page.props.errors["user_adress.calle"]?(d(),a("p",ne,n(s.$page.props.errors["user_adress.calle"]),1)):l("",!0)]),r("div",null,[e[33]||(e[33]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Num. Ext.",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>t.user_adress.num_ext=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_adress.num_ext"]}])},null,2),[[i,t.user_adress.num_ext]]),s.$page.props.errors["user_adress.num_ext"]?(d(),a("p",ue,n(s.$page.props.errors["user_adress.num_ext"]),1)):l("",!0)]),r("div",null,[e[34]||(e[34]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Num. Int.",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=o=>t.user_adress.num_int=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_adress.num_int"]}])},null,2),[[i,t.user_adress.num_int]]),s.$page.props.errors["user_adress.num_int"]?(d(),a("p",ie,n(s.$page.props.errors["user_adress.num_int"]),1)):l("",!0)]),r("div",null,[e[35]||(e[35]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Colonia",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=o=>t.user_adress.colonia=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_adress.colonia"]}])},null,2),[[i,t.user_adress.colonia]]),s.$page.props.errors["user_adress.colonia"]?(d(),a("p",me,n(s.$page.props.errors["user_adress.colonia"]),1)):l("",!0)]),r("div",null,[e[36]||(e[36]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Código Postal",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=o=>t.user_adress.cp=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_adress.cp"]}])},null,2),[[i,t.user_adress.cp]]),s.$page.props.errors["user_adress.cp"]?(d(),a("p",be,n(s.$page.props.errors["user_adress.cp"]),1)):l("",!0)]),r("div",null,[e[37]||(e[37]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Municipio",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=o=>t.user_adress.municipio=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_adress.municipio"]}])},null,2),[[i,t.user_adress.municipio]]),s.$page.props.errors["user_adress.municipio"]?(d(),a("p",ge,n(s.$page.props.errors["user_adress.municipio"]),1)):l("",!0)]),r("div",null,[e[38]||(e[38]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Estado",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=o=>t.user_adress.estado=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_adress.estado"]}])},null,2),[[i,t.user_adress.estado]]),s.$page.props.errors["user_adress.estado"]?(d(),a("p",xe,n(s.$page.props.errors["user_adress.estado"]),1)):l("",!0)])])],512),[[f,m.value===2]]),p(r("div",ye,[r("div",ve,[r("div",null,[e[39]||(e[39]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lugar de Nacimiento",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=o=>t.user_data_extend.lugar_nacimiento=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_data_extend.lugar_nacimiento"]}])},null,2),[[i,t.user_data_extend.lugar_nacimiento]]),s.$page.props.errors["user_data_extend.lugar_nacimiento"]?(d(),a("p",fe,n(s.$page.props.errors["user_data_extend.lugar_nacimiento"]),1)):l("",!0)]),r("div",null,[e[40]||(e[40]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ocupación",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=o=>t.user_data_extend.ocupacion=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_data_extend.ocupacion"]}])},null,2),[[i,t.user_data_extend.ocupacion]]),s.$page.props.errors["user_data_extend.ocupacion"]?(d(),a("p",_e,n(s.$page.props.errors["user_data_extend.ocupacion"]),1)):l("",!0)]),r("div",null,[e[41]||(e[41]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Profesión",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=o=>t.user_data_extend.profesion=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_data_extend.profesion"]}])},null,2),[[i,t.user_data_extend.profesion]]),s.$page.props.errors["user_data_extend.profesion"]?(d(),a("p",ce,n(s.$page.props.errors["user_data_extend.profesion"]),1)):l("",!0)]),r("div",null,[e[42]||(e[42]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lugar de Trabajo",-1)),p(r("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=o=>t.user_data_extend.lugar_trabajo=o),class:u(["w-full px-3 py-2 border rounded-md",{"border-red-500":s.$page.props.errors["user_data_extend.lugar_trabajo"]}])},null,2),[[i,t.user_data_extend.lugar_trabajo]]),s.$page.props.errors["user_data_extend.lugar_trabajo"]?(d(),a("p",$e,n(s.$page.props.errors["user_data_extend.lugar_trabajo"]),1)):l("",!0),p(r("input",{type:"hidden","onUpdate:modelValue":e[20]||(e[20]=o=>t.id=o),class:"w-full px-3 py-2 border rounded-md"},null,512),[[i,t.id]])])])],512),[[f,m.value===3]]),r("div",ke,[r("div",null,[m.value>1?(d(),a("button",{key:0,type:"button",onClick:e[21]||(e[21]=o=>m.value--),class:"px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-md border"}," Anterior ")):l("",!0)]),r("div",we,[m.value<3?(d(),a("button",{key:0,type:"button",onClick:e[22]||(e[22]=o=>m.value++),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"}," Siguiente ")):l("",!0),r("button",{type:"submit",disabled:x.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},n(x.value?"Guardando...":"Guardar"),9,Ue),r("button",{type:"button",onClick:c,class:"px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-md border"}," Cancelar ")])])],32)])])]))}},Ne=A(Ve,[["__scopeId","data-v-8d54bd9d"]]);export{Ne as U};
