import{i as _,y as B,h as f,z as S,c as d,o as r,a as k,w,b as e,g as V,p,F as m,q as x,t as o,A as C,x as D,d as E,B as U}from"./app-15q5s8El.js";import{_ as I}from"./AuthenticatedLayout-cAs3JO6R.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"p-4 bg-white rounded-lg shadow-xs"},H={class:"contenedor"},M={class:"mb-8"},$=["value"],j={key:0,class:"flex gap-6 items-stretch"},q={class:"panel"},z={class:"panel-header"},L={class:"text-lg font-semibold"},O={class:"list-contenedor"},Q={class:"flex items-center w-full cursor-pointer space-x-3"},T=["value"],G={class:"text-gray-700"},J={class:"transfer-buttons"},K=["disabled"],P=["disabled"],R={class:"panel"},W={class:"panel-header"},X={class:"text-lg font-semibold"},Y={class:"list-contenedor"},Z={class:"flex items-center w-full cursor-pointer space-x-3"},ee=["value"],se={class:"text-gray-700"},oe={__name:"BulkUserEntitiesAssignment",props:{users:Array,allDatas:Array,assignedDatasByUser:Object,tableName:String,addUrl:String,removeUrl:String},setup(i){const v=i,t=_(null),c=_([]),u=_([]),b=B({...v.assignedDatasByUser}),g=f(()=>t.value?b[t.value]||[]:[]),y=f(()=>{const n=g.value.map(s=>s.id);return v.allDatas.filter(s=>!n.includes(s.id))}),A=async()=>{var n,s;try{const l=await U.post(v.addUrl,{user_id:t.value,datas:c.value});b[t.value]=l.data.data[t.value],c.value=[]}catch(l){alert("Error al asignar: "+((s=(n=l.response)==null?void 0:n.data)==null?void 0:s.message)||l.message)}},N=async()=>{var n,s;try{const l=await U.post(v.removeUrl,{user_id:t.value,datas:u.value});b[t.value]=l.data.data[t.value],u.value=[]}catch(l){alert("Error al remover: "+((s=(n=l.response)==null?void 0:n.data)==null?void 0:s.message)||l.message)}};return(n,s)=>{const l=S("Head");return r(),d(m,null,[k(l,{title:`Asignación de ${i.tableName}`},null,8,["title"]),k(I,null,{header:w(()=>[E(" Asignación de "+o(i.tableName),1)]),default:w(()=>[e("div",F,[e("div",H,[e("div",M,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Seleccionar usuario: ",-1)),p(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),class:"select-style"},[s[3]||(s[3]=e("option",{value:null},"-- Seleccione un usuario --",-1)),(r(!0),d(m,null,x(i.users,a=>(r(),d("option",{key:a.id,value:a.id},o(a.username)+" (ID: "+o(a.id)+") ",9,$))),128))],512),[[C,t.value]])]),t.value?(r(),d("div",j,[e("div",q,[e("div",z,[e("h3",L,o(i.tableName)+" disponibles ("+o(y.value.length)+")",1)]),e("div",O,[(r(!0),d(m,null,x(y.value,a=>(r(),d("div",{key:a.id,class:"list-item"},[e("label",Q,[p(e("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":s[1]||(s[1]=h=>c.value=h),class:"form-checkbox h-5 w-5 text-blue-600 rounded border-gray-300"},null,8,T),[[D,c.value]]),e("span",G,o(a.data),1)])]))),128))])]),e("div",J,[e("button",{onClick:A,disabled:!c.value.length,class:"btn-action bg-emerald-600 hover:bg-emerald-700 text-white"}," Agregar → ",8,K),e("button",{onClick:N,disabled:!u.value.length,class:"btn-action bg-rose-600 hover:bg-rose-700 text-white"}," ← Quitar ",8,P)]),e("div",R,[e("div",W,[e("h3",X,o(i.tableName)+" asignados ("+o(g.value.length)+")",1)]),e("div",Y,[(r(!0),d(m,null,x(g.value,a=>(r(),d("div",{key:a.id,class:"list-item"},[e("label",Z,[p(e("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":s[2]||(s[2]=h=>u.value=h),class:"form-checkbox h-5 w-5 text-blue-600 rounded border-gray-300"},null,8,ee),[[D,u.value]]),e("span",se,o(a.name),1)])]))),128))])])])):V("",!0)])])]),_:1})],64)}}};export{oe as default};
