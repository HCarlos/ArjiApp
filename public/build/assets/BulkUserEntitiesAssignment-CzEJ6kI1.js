import{i as _,y as B,h as f,z as S,c as i,o as r,a as k,w as D,b as e,g as C,p,F as m,q as x,t as o,A as V,x as w,B as U}from"./app-BGfWqk3J.js";import{_ as E}from"./AuthenticatedLayout-B62zVtn6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"text-2xl font-bold text-gray-800"},F={class:"container"},H={class:"mb-8"},M=["value"],$={key:0,class:"flex gap-6 items-stretch"},j={class:"panel"},q={class:"panel-header"},z={class:"text-lg font-semibold"},L={class:"list-container"},O={class:"flex items-center w-full cursor-pointer space-x-3"},Q=["value"],G={class:"text-gray-700"},J={class:"transfer-buttons"},K=["disabled"],P=["disabled"],R={class:"panel"},T={class:"panel-header"},W={class:"text-lg font-semibold"},X={class:"list-container"},Y={class:"flex items-center w-full cursor-pointer space-x-3"},Z=["value"],ee={class:"text-gray-700"},le={__name:"BulkUserEntitiesAssignment",props:{users:Array,allDatas:Array,assignedDatasByUser:Object,tableName:String,addUrl:String,removeUrl:String},setup(d){const v=d,t=_(null),c=_([]),u=_([]),b=B({...v.assignedDatasByUser}),g=f(()=>t.value?b[t.value]||[]:[]),y=f(()=>{const n=g.value.map(s=>s.id);return v.allDatas.filter(s=>!n.includes(s.id))}),A=async()=>{var n,s;try{const l=await U.post(v.addUrl,{user_id:t.value,datas:c.value});b[t.value]=l.data.data[t.value],c.value=[]}catch(l){alert("Error al asignar: "+((s=(n=l.response)==null?void 0:n.data)==null?void 0:s.message)||l.message)}},N=async()=>{var n,s;try{const l=await U.post(v.removeUrl,{user_id:t.value,datas:u.value});b[t.value]=l.data.data[t.value],u.value=[]}catch(l){alert("Error al remover: "+((s=(n=l.response)==null?void 0:n.data)==null?void 0:s.message)||l.message)}};return(n,s)=>{const l=S("Head");return r(),i(m,null,[k(l,{title:`Asignación de ${d.tableName}`},null,8,["title"]),k(E,null,{header:D(()=>[e("h1",I," Asignación de "+o(d.tableName),1)]),default:D(()=>[e("div",F,[e("div",H,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Seleccionar usuario: ",-1)),p(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),class:"select-style"},[s[3]||(s[3]=e("option",{value:null},"-- Seleccione un usuario --",-1)),(r(!0),i(m,null,x(d.users,a=>(r(),i("option",{key:a.id,value:a.id},o(a.username)+" (ID: "+o(a.id)+") ",9,M))),128))],512),[[V,t.value]])]),t.value?(r(),i("div",$,[e("div",j,[e("div",q,[e("h3",z,o(d.tableName)+" disponibles ("+o(y.value.length)+")",1)]),e("div",L,[(r(!0),i(m,null,x(y.value,a=>(r(),i("div",{key:a.id,class:"list-item"},[e("label",O,[p(e("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":s[1]||(s[1]=h=>c.value=h),class:"form-checkbox h-5 w-5 text-blue-600 rounded border-gray-300"},null,8,Q),[[w,c.value]]),e("span",G,o(a.data),1)])]))),128))])]),e("div",J,[e("button",{onClick:A,disabled:!c.value.length,class:"btn-action bg-emerald-600 hover:bg-emerald-700 text-white"}," Agregar → ",8,K),e("button",{onClick:N,disabled:!u.value.length,class:"btn-action bg-rose-600 hover:bg-rose-700 text-white"}," ← Quitar ",8,P)]),e("div",R,[e("div",T,[e("h3",W,o(d.tableName)+" asignados ("+o(g.value.length)+")",1)]),e("div",X,[(r(!0),i(m,null,x(g.value,a=>(r(),i("div",{key:a.id,class:"list-item"},[e("label",Y,[p(e("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":s[2]||(s[2]=h=>u.value=h),class:"form-checkbox h-5 w-5 text-blue-600 rounded border-gray-300"},null,8,Z),[[w,u.value]]),e("span",ee,o(a.name),1)])]))),128))])])])):C("",!0)])]),_:1})],64)}}};export{le as default};
